apply plugin: "war"
apply plugin: 'java'


repositories {
    mavenCentral()
}

dependencies {

    compile fileTree(dir: 'src/libs', include: ['*.jar'])

    compile project(":vesta.common.taglib")
    compile project(":vesta.common.utility")
    compile project(":vesta.common.result")
    compile project(":vesta.common.task")

    compile project(":vesta.domain.mall")
    compile project(":vesta.application.mall")

    compile project(":vesta.application.webServiceServer")
    compile project(":vesta.application.webServiceClient")
    compile project(":vesta.application.role")
    compile project(":vesta.application.property")
    compile project(":vesta.application.message")
    compile project(":vesta.application.user")
    compile project(":vesta.application.say")
    compile project(":vesta.application.community")
    compile project(":vesta.application.statistics")
    compile project(":vesta.application.system")
    compile project(":vesta.application.workbench")
    compile project(":vesta.application.translog")

    compile project(":vesta.common.filter")
    compile project(":vesta.domain.role")
    compile project(":vesta.domain.property")
    compile project(":vesta.domain.message")
    compile project(":vesta.domain.workbench")
    compile project(":vesta.domain.translog")

    compile project(":vesta.domain.plan")
    compile project(":vesta.domain.stand")
    compile project(":vesta.domain.construction")
    compile project(":vesta.repository.construction")
    compile project(":vesta.application.construction")

    compile project(":vesta.domain.advertisement")
    compile project(":vesta.domain.user")
    compile project(":vesta.domain.statistics")
    compile project(":vesta.application.statistics")
    compile project(":vesta.domain.sysmanage")
    compile project(":vesta.application.sysmanage")
    compile project(":vesta.application.homePage")
    compile project(":vesta.domain.homePage")

    compile project(":vesta.application.charge")
    compile project(":vesta.domain.charge")
    compile project(":vesta.repository.charge")

    compile project(":vesta.application.announcement")
    compile project(":vesta.domain.announcement")
    compile project(":vesta.repository.announcement")

    compile project(":vesta.domain.versionManage")
    compile project(":vesta.repository.versionManage")
    compile project(":vesta.application.versionManage")

    compile project(":vesta.domain.security")
    compile project(":vesta.repository.security")
    compile project(":vesta.application.security")

    compile project(":vesta.application.complain")
   // compile project(":vesta.application.AdminDTO")
    //compile project(":vesta.domain.repository")
    //从maven私服下载UE依赖
//    compile "com.baidu:ueditor:1.1.2";
//    compile "com.baidu:ueditor.json:1.1.2";
    compile group: 'cn.songxinqiang', name: 'com.baidu.ueditor', version: '1.1.2-offical'
    compile group: 'org.freemarker', name: 'freemarker', version: '2.3.26-incubating'
    compile(
    "org.springframework:spring-web:$springVersion",
    "org.springframework:spring-webmvc:$springVersion",
            "javax.servlet:javax.servlet-api:3.1.0",
            "javax.servlet.jsp.jstl:javax.servlet.jsp.jstl-api:1.2.1",
            "org.apache.taglibs:taglibs-standard-impl:1.2.5",
            "javax.validation:validation-api:1.1.0.Final",
            "cn.featherfly:bccs-api:3.0.1",
            "com.notnoop.apns:apns:0.1.6",
    )
    testCompile group: 'junit', name: 'junit', version: '4.11'
}

task copyJars(type: Copy) {
    from configurations.runtime
    into 'src/main/webapp/WEB-INF/lib' //
}
task jarWithoutResources(type: Jar) {
    baseName project.name
    from("$buildDir/classes/main")
}

war{
    dependsOn jarWithoutResources
    from("$projectDir/src/main/resources") {
        include "*.properties"
        into("WEB-INF/classes")
    }
    classpath=classpath - sourceSets.main.output
    classpath fileTree(dir:libsDir, include:"${project.name}-${version}.jar")
}
task('jarPath')<<{
    configurations.runtime.resolve().each {
        print it.toString()+";"
    }
    println();
}

